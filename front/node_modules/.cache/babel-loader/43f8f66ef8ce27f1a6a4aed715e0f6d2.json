{"ast":null,"code":"import { mapActions } from 'vuex';\nexport default {\n  props: {\n    type: String,\n    data: Object\n  },\n  data: () => ({\n    dialog: false,\n    rules: {\n      title: [val => (val || '').length > 0 || 'Quiz title is required']\n    },\n    title: '',\n    id: null,\n    profile: null\n  }),\n  methods: {\n    ...mapActions(['editQuiz', 'createQuiz', 'deleteQuiz', 'uploadImage']),\n    clearForm() {\n      this.title = null;\n      this.dialog = false;\n    },\n    addQuiz() {\n      if (this.$refs.form.validate()) {\n        this.createQuiz({\n          profile: this.profile,\n          title: this.title,\n          userId: sessionStorage.getItem('userId')\n        });\n        this.clearForm();\n      }\n    },\n    upload(image) {\n      const fileName = file.name.split('.');\n      this.profile = image.name;\n      const fd = new FormData();\n      fd.append('profile', image);\n      this.uploadImage(fd);\n    },\n    async onFileSelected(event) {\n      this.upload(event.target.files[0]);\n    },\n    showDataInForm() {\n      this.id = this.data.id;\n      this.title = this.data.title;\n    },\n    updateQuiz() {\n      this.editQuiz({\n        id: this.id,\n        title: this.title\n      });\n      this.clearForm();\n    }\n  },\n  created() {\n    if (this.dialog) {\n      this.$refs.form.reset();\n    }\n  }\n};","map":{"version":3,"mappings":"AAmFA;AAEA;EACAA;IACAC;IACAC;EACA;EAEAA;IACAC;IACAC;MACAC;IACA;IACAA;IACAC;IACAC;EACA;EAEAC;IACA;IACAC;MACA;MACA;IACA;IAEAC;MACA;QACA;UACAH;UACAF;UACAM;QACA;QACA;MACA;IACA;IAEAC;MACA;MACA;MACA;MACAC;MACA;IACA;IAEA;MACA;IACA;IAEAC;MACA;MACA;IACA;IAEAC;MACA,cACA;QACAT;QACAD;MACA,EACA;MACA;IACA;EACA;EACAW;IACA;MACA;IACA;EACA;AACA","names":["props","type","data","dialog","rules","title","id","profile","methods","clearForm","addQuiz","userId","upload","fd","showDataInForm","updateQuiz","created"],"sourceRoot":"src/components","sources":["quiz-model.vue"],"sourcesContent":["<template>\r\n  <v-row :justify=\"type=='edit' ? 'center' : 'end'\">\r\n    <v-dialog\r\n      v-model=\"dialog\"\r\n      persistent\r\n      max-width=\"600px\"\r\n    >\r\n      <template v-slot:activator=\"{ on, attrs }\">\r\n        <v-icon v-if=\"type=='edit'\" v-bind=\"attrs\" v-on=\"on\" @click=\"showDataInForm\" color=\"accent\">mdi-pencil</v-icon>\r\n        <v-btn \r\n          icon \r\n          class=\"white\"\r\n          v-if=\"type=='create'\" \r\n          v-bind=\"attrs\"\r\n          v-on=\"on\" \r\n          @click=\"showQuestionForm(true)\"  \r\n        >\r\n          <v-icon class=\"blue--text\">mdi-plus</v-icon>\r\n        </v-btn>\r\n      </template>\r\n      <v-card>\r\n        <v-card-title>\r\n          <span class=\"text-h5\" v-if=\"type=='create'\">Create a quiz</span>\r\n          <span class=\"text-h5\" v-if=\"type=='edit'\">Edit a quiz</span>\r\n        </v-card-title>\r\n        <v-card-text>\r\n          <v-form\r\n            ref=\"form\"\r\n            v-model=\"valid\"\r\n          >\r\n            <v-col cols=\"12\">\r\n              <v-text-field\r\n                label=\"Quiz title\"\r\n                placeholder=\"Quiz title\"\r\n                :rules=\"rules.title\"\r\n                required\r\n                v-model=\"title\"\r\n              ></v-text-field>\r\n            </v-col>\r\n            <v-col cols=\"12\">\r\n              <input\r\n              type=\"file\"\r\n                label=\"Quiz title\"\r\n                placeholder=\"Quiz title\"\r\n                @change=\"onFileSelected\"\r\n                required\r\n              />\r\n            </v-col>\r\n          </v-form>\r\n        </v-card-text>\r\n        <v-card-actions>\r\n          <v-spacer></v-spacer>\r\n          <v-btn\r\n            color=\"error\"\r\n            text\r\n            @click=\"clearForm\"\r\n          >\r\n            Close\r\n          </v-btn>\r\n          <v-btn\r\n            v-if=\"type == 'create'\"\r\n            color=\"accent\"\r\n            text\r\n            @click=\"addQuiz\"\r\n          >\r\n            Save\r\n          </v-btn>\r\n          <v-btn\r\n            v-else\r\n            color=\"accent\"\r\n            text\r\n            @click=\"updateQuiz\"\r\n          >\r\n            Update\r\n          </v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n  </v-row>\r\n</template>\r\n\r\n\r\n<script>\r\nimport { mapActions } from 'vuex';\r\n\r\n  export default {\r\n    props: {\r\n      type: String,\r\n      data: Object\r\n    },\r\n\r\n    data: () => ({\r\n      dialog: false,\r\n      rules: {\r\n        title: [val => (val || '').length > 0 || 'Quiz title is required'],\r\n      },\r\n      title: '',\r\n      id: null,\r\n      profile: null\r\n    }),\r\n\r\n    methods: {\r\n      ...mapActions(['editQuiz', 'createQuiz', 'deleteQuiz', 'uploadImage']),\r\n      clearForm() {\r\n        this.title = null\r\n        this.dialog = false\r\n      },\r\n\r\n      addQuiz() {\r\n        if (this.$refs.form.validate()) {\r\n          this.createQuiz({\r\n            profile: this.profile,\r\n            title: this.title,\r\n            userId: sessionStorage.getItem('userId')\r\n          })\r\n          this.clearForm()\r\n        }\r\n      },\r\n\r\n      upload(image) {\r\n        const fileName = file.name.split('.')\r\n        this.profile = image.name\r\n        const fd = new FormData()\r\n        fd.append('profile', image)\r\n        this.uploadImage(fd)\r\n      },\r\n\r\n      async onFileSelected(event){\r\n        this.upload(event.target.files[0])\r\n      },\r\n\r\n      showDataInForm() {\r\n        this.id = this.data.id\r\n        this.title = this.data.title\r\n      },\r\n\r\n      updateQuiz() {\r\n        this.editQuiz(\r\n          {\r\n            id: this.id,\r\n            title: this.title,\r\n          }\r\n        )\r\n        this.clearForm()\r\n      }\r\n    },\r\n    created() {\r\n      if (this.dialog) {\r\n        this.$refs.form.reset()\r\n      }\r\n    }\r\n  }\r\n</script>"]},"metadata":{},"sourceType":"module"}