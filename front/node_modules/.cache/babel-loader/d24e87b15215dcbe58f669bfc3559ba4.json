{"ast":null,"code":"import axios from 'axios';\nimport { mapActions } from \"vuex\";\nexport default {\n  props: {\n    type: String,\n    data: Object\n  },\n  data: () => ({\n    dialog: false,\n    rules: {\n      name: [val => (val || '').length > 0 || 'This field is required'],\n      radio: [val => (val || '').length > 0 || '']\n    },\n    radios: '',\n    question: '',\n    answer1: '',\n    answer2: '',\n    answer3: '',\n    answer4: '',\n    id: null,\n    imagePath: null\n  }),\n  methods: {\n    ...mapActions([\"createQuestion\", 'editQuestion', 'fetchQuestions']),\n    upload(image) {\n      const fd = new FormData();\n      fd.append('profile', image);\n      axios.post('http://localhost:3000/image', fd).then(res => {\n        this.imagePath = res.data;\n        console.log(res.data);\n      });\n    },\n    async onFileSelected(event) {\n      this.upload(event.target.files[0]);\n    },\n    addQuestion() {\n      if (sessionStorage.getItem('quizId') && this.$refs.form.validate()) {\n        this.createQuestion({\n          quizId: sessionStorage.getItem('quizId'),\n          question: this.question,\n          answer: [{\n            answerContent: this.answer1,\n            isCorrect: this.radios == 'answer1'\n          }, {\n            answerContent: this.answer2,\n            isCorrect: this.radios == 'answer2'\n          }, {\n            answerContent: this.answer3,\n            isCorrect: this.radios == 'answer3'\n          }, {\n            answerContent: this.answer4,\n            isCorrect: this.radios == 'answer4'\n          }],\n          image: this.imagePath\n        });\n        this.clearForm();\n      }\n    },\n    updateQuestion() {\n      if (this.$refs.form.validate()) {\n        this.editQuestion({\n          id: this.id,\n          question: this.question,\n          answer: [{\n            answerContent: this.answer1,\n            isCorrect: this.radios == 'answer1'\n          }, {\n            answerContent: this.answer2,\n            isCorrect: this.radios == 'answer2'\n          }, {\n            answerContent: this.answer3,\n            isCorrect: this.radios == 'answer3'\n          }, {\n            answerContent: this.answer4,\n            isCorrect: this.radios == 'answer4'\n          }]\n        });\n        this.clearForm();\n      }\n    },\n    showDataInForm() {\n      this.id = this.data.id;\n      this.imagePath = this.data.image;\n      this.question = this.data.question;\n      const answers = this.data.answer;\n      this.answer1 = answers[0].answerContent;\n      this.answer2 = answers[1].answerContent;\n      this.answer3 = answers[2].answerContent;\n      this.answer4 = answers[3].answerContent;\n      for (const i in answers) {\n        if (answers[i].isCorrect) {\n          const index = parseInt(i) + 1;\n          this.radios = 'answer' + index;\n        }\n      }\n      this.showQuestionForm();\n    },\n    clearForm() {\n      this.question = '';\n      this.answer1 = '';\n      this.answer2 = '';\n      this.answer3 = '';\n      this.answer4 = '';\n      this.radios = '';\n      this.dialog = false;\n      this.imagePath = null;\n    }\n  }\n};","map":{"version":3,"mappings":"AAmIA;AACA;AACA;EACAA;IACAC;IACAC;EACA;EAEAA;IACAC;IACAC;MACAC;MACAC;IACA;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;EACA;EAEAC;IACA;IAEAC;MACA;MACAC;MACAC;QACA;QACAC;MACA;IACA;IAEA;MACA;IACA;IAEAC;MACA;QACA;UACAC;UACAb;UACAc,SACA;YAAAC;YAAAC;UAAA,GACA;YAAAD;YAAAC;UAAA,GACA;YAAAD;YAAAC;UAAA,GACA;YAAAD;YAAAC;UAAA,EACA;UACAC;QACA;QACA;MACA;IACA;IAEAC;MACA;QACA;UACAb;UACAL;UACAc,SACA;YAAAC;YAAAC;UAAA,GACA;YAAAD;YAAAC;UAAA,GACA;YAAAD;YAAAC;UAAA,GACA;YAAAD;YAAAC;UAAA;QAEA;QACA;MACA;IACA;IAEAG;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;UACA;UACA;QACA;MACA;MACA;IACA;IAEAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;EACA;AACA","names":["props","type","data","dialog","rules","name","radio","radios","question","answer1","answer2","answer3","answer4","id","imagePath","methods","upload","fd","axios","console","addQuestion","quizId","answer","answerContent","isCorrect","image","updateQuestion","showDataInForm","clearForm"],"sourceRoot":"src/components","sources":["question-model.vue"],"sourcesContent":["<template>\r\n  <v-row :justify=\"type=='edit' ? 'center' : 'end'\">\r\n    <v-dialog\r\n      v-model=\"dialog\"\r\n      persistent\r\n      max-width=\"600px\"\r\n    >\r\n      <template v-slot:activator=\"{ on, attrs }\">\r\n        <v-icon v-if=\"type=='edit'\" v-bind=\"attrs\" v-on=\"on\" @click=\"showDataInForm\" color=\"accent\">mdi-pencil</v-icon>\r\n        <v-btn \r\n          v-if=\"type=='create'\" \r\n          v-bind=\"attrs\" v-on=\"on\" \r\n          @click=\"showQuestionForm(true)\" \r\n          icon \r\n          class=\"white\"\r\n        >\r\n          <v-icon class=\"blue--text\">mdi-plus</v-icon>\r\n        </v-btn>\r\n      </template>\r\n      <v-card>\r\n        <v-card-title>\r\n          <span class=\"text-h5\" v-if=\"type=='create'\">Create a Question</span>\r\n          <span class=\"text-h5\" v-if=\"type=='edit'\">Edit a Question</span>\r\n        </v-card-title>\r\n        <v-card-text>\r\n          <v-form\r\n            ref=\"form\"\r\n            v-model=\"valid\"\r\n            lazy-validation\r\n          >\r\n            <v-col cols=\"12\">\r\n              <v-text-field\r\n                label=\"Question\"\r\n                placeholder=\"Question\"\r\n                :rules=\"rules.name\"\r\n                required\r\n                v-model=\"question\"\r\n              ></v-text-field>\r\n            </v-col>\r\n            <v-col cols=\"12\">\r\n              <v-img width=\"60%\" class=\"\" :src=\"'http://localhost:3000/uploads/'+imagePath\"></v-img>\r\n            </v-col>\r\n            <v-col cols=\"12\">\r\n              <input type=\"file\" id=\"image\" @change=\"onFileSelected\"/> \r\n            </v-col>\r\n            <v-col cols=\"12\">\r\n              <v-radio-group \r\n                v-model=\"radios\"                         \r\n                :rules=\"rules.radio\"\r\n              >\r\n                <label for=\"\">Answers</label>\r\n                  <v-radio value=\"answer1\">\r\n                    <template v-slot:label>\r\n                      <v-text-field\r\n                        v-model=\"answer1\"\r\n                        :rules=\"rules.name\"\r\n                        label=\"Answer\"\r\n                        placeholder=\"Answer\"\r\n                        required\r\n                      ></v-text-field>\r\n                    </template>\r\n                  </v-radio>\r\n                  <v-radio value=\"answer2\">\r\n                    <template v-slot:label>\r\n                      <v-text-field\r\n                        v-model=\"answer2\"\r\n                        :rules=\"rules.name\"\r\n                        label=\"Answer\"\r\n                        placeholder=\"Answer\"\r\n                        required\r\n                      ></v-text-field>\r\n                    </template>\r\n                  </v-radio>\r\n                  <v-radio value=\"answer3\">\r\n                    <template v-slot:label>\r\n                      <v-text-field\r\n                        v-model=\"answer3\"\r\n                        :rules=\"rules.name\"\r\n                        label=\"Answer\"\r\n                        placeholder=\"Answer\"\r\n                        required\r\n                      ></v-text-field>\r\n                    </template>\r\n                  </v-radio>\r\n                  <v-radio value=\"answer4\">\r\n                    <template v-slot:label>\r\n                      <v-text-field\r\n                        v-model=\"answer4\"\r\n                        :rules=\"rules.name\"\r\n                        label=\"Answer\"\r\n                        placeholder=\"Answer\"\r\n                        required\r\n                      ></v-text-field>\r\n                    </template>\r\n                  </v-radio>\r\n              </v-radio-group>\r\n            </v-col>\r\n          </v-form>\r\n        </v-card-text>\r\n        <v-card-actions>\r\n          <v-spacer></v-spacer>\r\n          <v-btn\r\n            color=\"error\"\r\n            text\r\n            @click=\"clearForm\"\r\n          >\r\n            Close\r\n          </v-btn>\r\n          <v-btn\r\n            v-if=\"type == 'create'\"\r\n            color=\"accent\"\r\n            text\r\n            @click=\"addQuestion\"\r\n          >\r\n            Save\r\n          </v-btn>\r\n          <v-btn\r\n            v-else\r\n            color=\"accent\"\r\n            text\r\n            @click=\"updateQuestion\"\r\n          >\r\n            Update\r\n          </v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n  </v-row>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n  import { mapActions } from \"vuex\";\r\n  export default {\r\n    props: {\r\n      type: String,\r\n      data: Object\r\n    },\r\n\r\n    data: () => ({\r\n      dialog: false,\r\n      rules: {\r\n        name: [val => (val || '').length > 0 || 'This field is required'],\r\n        radio: [val => (val || '').length > 0 || ''],\r\n      },\r\n      radios: '',\r\n      question: '',\r\n      answer1: '',\r\n      answer2: '',\r\n      answer3: '',\r\n      answer4: '',\r\n      id: null,\r\n      imagePath: null,\r\n    }),\r\n\r\n    methods: {\r\n      ...mapActions([\"createQuestion\", 'editQuestion', 'fetchQuestions']),\r\n\r\n      upload(image) {\r\n        const fd = new FormData()\r\n        fd.append('profile', image)\r\n        axios.post('http://localhost:3000/image', fd).then((res)=> {\r\n          this.imagePath = res.data\r\n          console.log(res.data);\r\n        })\r\n      },\r\n\r\n      async onFileSelected(event){\r\n        this.upload(event.target.files[0])\r\n      },\r\n\r\n      addQuestion() {\r\n        if (sessionStorage.getItem('quizId') && this.$refs.form.validate()) {\r\n          this.createQuestion({\r\n            quizId: sessionStorage.getItem('quizId'),\r\n            question: this.question,\r\n            answer: [\r\n              {answerContent: this.answer1, isCorrect: this.radios=='answer1'},\r\n              {answerContent: this.answer2, isCorrect: this.radios=='answer2'},\r\n              {answerContent: this.answer3, isCorrect: this.radios=='answer3'},\r\n              {answerContent: this.answer4, isCorrect: this.radios=='answer4'},\r\n            ],\r\n            image: this.imagePath\r\n          })\r\n          this.clearForm()\r\n        }\r\n      },\r\n\r\n      updateQuestion() {\r\n        if (this.$refs.form.validate()) {\r\n          this.editQuestion({\r\n            id: this.id,\r\n            question: this.question,\r\n            answer: [\r\n              {answerContent: this.answer1, isCorrect: this.radios=='answer1'},\r\n              {answerContent: this.answer2, isCorrect: this.radios=='answer2'},\r\n              {answerContent: this.answer3, isCorrect: this.radios=='answer3'},\r\n              {answerContent: this.answer4, isCorrect: this.radios=='answer4'},\r\n            ]\r\n          })\r\n          this.clearForm()\r\n        }\r\n      }, \r\n\r\n      showDataInForm() {\r\n        this.id = this.data.id\r\n        this.imagePath = this.data.image\r\n        this.question= this.data.question\r\n        const answers = this.data.answer\r\n        this.answer1 = answers[0].answerContent\r\n        this.answer2 = answers[1].answerContent\r\n        this.answer3 = answers[2].answerContent\r\n        this.answer4 = answers[3].answerContent\r\n        for (const i in answers) {\r\n          if (answers[i].isCorrect) {\r\n            const index = parseInt(i)+1\r\n            this.radios = 'answer'+index\r\n          }\r\n        }\r\n        this.showQuestionForm()\r\n      },\r\n      \r\n      clearForm() {\r\n        this.question = ''\r\n        this.answer1 = ''\r\n        this.answer2 = ''\r\n        this.answer3 = ''\r\n        this.answer4 = ''\r\n        this.radios = ''\r\n        this.dialog = false\r\n        this.imagePath = null\r\n      }\r\n    },\r\n  }\r\n</script>"]},"metadata":{},"sourceType":"module"}